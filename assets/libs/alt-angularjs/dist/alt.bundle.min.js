Array.prototype.indexOf||(Array.prototype.indexOf=function(a,c){for(var d=c||0,b=this.length;b>d;d++){if(this[d]===a){return d}}return -1}),angular.module("ngRoute",[]);var alt=angular.module("Alt",[]);alt.application="alt",alt.environment="production",alt.version="2.0.0",alt.urlArgs="",alt.urlArgs="production"==alt.environment?"_v="+alt.version:"_t="+ +new Date,alt.theme="",alt.requires=[],alt.componentFolder="component",alt.modules={},alt.registry={},alt.extend=function(a,b){return a="undefined"==typeof a||null==a?{}:a,b="undefined"==typeof b||null==b?"[object Array]"===Object.prototype.toString.call(a)?[]:{}:b,angular.forEach(a,function(d,c){switch(d="undefined"==typeof d||null==d?{}:d,typeof d){case"object":b[c]="[object Array]"===Object.prototype.toString.call(d)?b[c]||d:alt.extend(a[c],b[c]);break;default:b[c]="undefined"!=typeof b[c]&&b[c]!=angular.noop?b[c]:d}}),b},alt.config(["$locationProvider","$compileProvider","$controllerProvider","$filterProvider","$logProvider","$provide",function(c,f,h,d,b,g){alt._controller=alt.controller,alt._service=alt.service,alt._factory=alt.factory,alt._value=alt.value,alt._directive=alt.directive,alt._filter=alt.filter,alt._run=alt.run,alt._config=alt.config,alt.controller=function(a,i){return h.register(a,i),this},alt.config=function(a,i){return g.config(a,i),this},alt.constant=function(a,i){return g.constant(a,i),this},alt.service=function(a,i){return g.service(a,i),this},alt.factory=function(a,i){return g.factory(a,i),this},alt.value=function(a,i){return g.value(a,i),this},alt.directive=function(a,e){return f.directive(a,e),this},alt.filter=function(a,i){return d.register(a,i),this},alt.run=function(j){for(var l=angular.element(document.getElementsByTagName("body")[0]).injector(),m=(l.get("$log"),j.slice(0,j.length-1)),k=j[j.length-1],i=0;i<j.length-1;i++){m[i]=l.get(m[i])}return k.apply(null,m),this},alt.providers={$compileProvider:f,$controllerProvider:h,$filterProvider:d,$logProvider:b,$provide:g}}]),alt.module=function(C,x){if(alt.requires.indexOf(C)<=-1){alt.requires.push(C);try{for(var k=x||angular.module(C),b=k._invokeQueue,A=k._runBlocks,j=0;j<b.length;j++){var m=b[j],q=alt.providers[m[0]];q[m[1]].apply(q,m[2])}for(var B=0;B<A.length;B++){for(var D=A[B],z=D.slice(0,D.length-1),y=D[D.length-1],w=angular.element(document.getElementsByTagName("body")[0]).injector(),g=0;g<z.length;g++){z[g]=w.get(z[g])}y.apply(null,z)}}catch(v){}}return alt},alt.directive("altComponent",["$log",function(a){return{templateUrl:function(c,f,g){var d=alt.componentFolder+"/"+f.altComponent+"/",b=d+"view."+(""!=alt.theme?alt.theme+".":"")+"html"+(""!=alt.urlArgs?"?"+alt.urlArgs:"");return b},transclude:!0,scope:{altComponent:"@",scope:"=",onload:"&?"},controller:["$scope","$timeout","$interval","$attrs","$element",function(f,h,k,g,c){var j=function(){f.onload=f.onload||function(){return angular.noop},f.onload=f.onload(),f.alt=alt;var i=alt.componentFolder+"/"+f.altComponent+"/",e=angular.element(document.getElementsByTagName("body")[0]).injector();requirejs([i+"controller"],function(v){var m=0,p=[];if("function"==typeof v){for(m=0;m<arguments.length;m++){p.push(arguments[m])}p.push(e),v.apply(this,p)}else{if("object"==typeof v&&v.length){var o,q="function"==typeof v[v.length-1]?v[v.length-1]:angular.noop,t="function"==typeof v[v.length-1]?v.length-1:v.length;for(m=0;t>m;m++){switch(o=null,v[m]){case"$scope":o=f;break;case"$injector":o=e;break;case"$attrs":o=g;break;case"$element":o=c;break;default:o=e.get(v[m])||null}p.push(o)}q.apply(this,p)}}angular.forEach(f,function(s,u){if("$"!==u.substr(0,1)&&"scope"!=u&&"altComponent"!=u&&"onload"!=u){try{f["_"+u]=angular.copy(s)}catch(l){}}}),angular.forEach(f.scope,function(s,u){try{f[u]=angular.copy(s)}catch(l){}});var r=function(l){return null!=l.$parent?("undefined"==typeof l.$parent.$attrs&&"object"==typeof l.$parent[g.scope]&&(l.$parent[g.scope]=f),r(l.$parent)):void 0};r(f),f.$apply(),h(function(){f.onload()})})},b=function(){"undefined"!=typeof f.scope&&(window.clearInterval(d),j())},d=window.setInterval(b,100)}]}}]),alt.directive("altTransclude",["$log",function(a){return{templateUrl:function(c,f,g){var d=alt.componentFolder+"/"+f.altTransclude+"/",b=d+"view."+(""!=alt.theme?alt.theme+".":"")+"html"+(""!=alt.urlArgs?"?"+alt.urlArgs:"");return b},transclude:!0,scope:!0,controller:["$scope","$timeout","$interval","$attrs","$element","$rootScope",function(m,h,d,b,j,c){m.$attrs=b;var f=function(){var p=m.$new(),i=alt.componentFolder+"/"+b.altTransclude+"/",e=angular.element(document.getElementsByTagName("body")[0]).injector();p.alt=alt,p.altTransclude=b.altTransclude,p.scope=b.scope,p.onload=m[b.onload]||angular.noop,p.parent=m,requirejs([i+"controller"],function(t){var n=0,l=[];if("function"==typeof t){for(n=0;n<arguments.length;n++){l.push(arguments[n])}l.push(e),t.apply(this,l)}else{if("object"==typeof t&&t.length){var q,v="function"==typeof t[t.length-1]?t[t.length-1]:angular.noop,r="function"==typeof t[t.length-1]?t.length-1:t.length;for(n=0;r>n;n++){switch(q=null,t[n]){case"$scope":q=p;break;case"$injector":q=e;break;case"$attrs":q=b;break;case"$element":q=j;break;default:q=e.get(t[n])||null}l.push(q)}v.apply(this,l)}}angular.forEach(p,function(o,u){if("$"!==u.substr(0,1)&&"scope"!=u&&"altTransclude"!=u&&"onload"!=u&&"parent"!=u){try{p["_"+u]=angular.copy(o)}catch(s){}}}),angular.forEach(m[b.scope],function(o,u){if(null!=o&&"undefined"==typeof o.$watch){try{p[u]=angular.copy(o)}catch(s){}}}),b.scope&&(m[b.scope]=p),b.scope&&m.$parent[b.scope]&&(m.$parent[b.scope]=p),p.$apply(),h(function(){p.onload()})})},g=function(){("undefined"==typeof b.scope||"undefined"!=typeof m[b.scope])&&(window.clearInterval(k),f())},k=window.setInterval(g,100)}]}}]),alt.factory("$uuid",function(){return{create:function(){function a(b){var c=(Math.random().toString(16)+"000000000").substr(2,8);return b?"-"+c.substr(0,4)+"-"+c.substr(4,4):c}return a()+a(!0)+a(!0)+a()},empty:function(){return"00000000-0000-0000-0000-000000000000"}}}),alt.run(["$rootScope","$q","$log",function(a,b,c){a.defaultRouteChanged=function(){var d=b.defer();return d.resolve(),d.promise},a.onRouteChanged=a.defaultRouteChanged,a.alt=alt}]),window.alt=alt,alt.modules.api=angular.module("alt-api",[]).config(["$provide","$httpProvider",function(a,b){b.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded";var c=null;a.factory("httpInterceptor",["$log","$q","$window",function(d,g,f){return{request:function(i){if(c=c||i.transformRequest,i.headers["Content-Type"]){if(0===i.headers["Content-Type"].indexOf("application/x-www-form-urlencoded")){var k=[],j=function(m,o){if("$$hashKey"==m){return""}var p;switch(typeof o){case"string":case"number":return m+"="+encodeURIComponent(o);case"object":p=[];for(var l in o){o.hasOwnProperty(l)&&"$$hashKey"!=l&&p.push(j(m+"["+l+"]",o[l]))}return p.join("&");case"array":p=[];for(var l=0;l<o.length;l++){p.push(j(m+"["+l+"]",o[l]))}return p.join("&")}};for(var h in i.data){i.data.hasOwnProperty(h)&&"$$hashKey"!=h&&k.push(j(h,i.data[h]))}i.transformRequest=c,i.data=k.join("&")}else{0==i.headers["Content-Type"].indexOf("multipart/form-data")&&(i.transformRequest=[function(o){var p=new FormData,m=function(r,s,u){if("$$hashKey"==s){return""}switch(typeof u){case"string":case"number":r.append(s,u);break;case"object":if("undefined"!=typeof File&&u instanceof File){r.append(s,u)}else{if("undefined"==typeof File&&"undefined"!=typeof u.name){r.append(s,u)}else{for(var q in u){u.hasOwnProperty(q)&&"$$hashKey"!=q&&m(r,s+"["+q+"]",u[q])}}}break;case"array":for(var q=0;q<u.length;q++){m(r,s+"["+q+"]",u[q])}}};for(var l in i.data){i.data.hasOwnProperty(l)&&"$$hashKey"!=l&&m(p,l,i.data[l])}return p}],delete i.headers["Content-Type"])}}return i},response:function(h){var i={};try{i=angular.copy(h)}catch(e){}if("object"==typeof h.data){if(i.version=h.data.v||100,i.code=h.data.s||h.data.c||h.data.code||h.status||200,i.status=i.code,i.data=h.data.d||h.data.data||h.data,i.message=h.data.m||h.data.msg||h.data,i.time=h.data.t||0,i.usage=h.data.u||"",i.token=h.data.token||h.token||"",200!=i.status){return 401==i.status?(f.location.href=alt.baseUrl+"auth/login",g.reject(i)):(i.message=i.message||"Gagal terhubung ke server",g.reject(i))}}else{if(0===h.config.url.indexOf(alt.serverUrl)&&200!=h.status&&"object"!=typeof h.data){return i.code=-1,i.status=i.code,i.message="Tidak dapat terhubung ke server","development"==alt.environment.toLowerCase()&&(i.message+="<br/>"+h.data),g.reject(i)}}return i}}}]),b.interceptors.push("httpInterceptor")}]).factory("$api",["$http","$log","$q",function(a,b,c){return function(g,f,d){g=g||"";var h=g.split("/");return f=f||h[h.length-1]+"id",g=(0!==g.indexOf(alt.serverUrl)?alt.serverUrl:"")+g,d=alt.extend({connect:function(){return !0},success:function(){return !0},error:function(){return !0}},d),{url:g,pkey:f,config:d,connect:function(n,q,e){n=n||"",n=(0!==n.indexOf("/")?"/":"")+n,q=q||{},e=alt.extend({skipAuthorization:!1,ismultipart:!1,method:"POST"},e);var k=c.defer(),j=!1,m=k.promise,t=c.defer(),p={headers:{"Content-Type":e.ismultipart?"multipart/form-data":"application/x-www-form-urlencoded"},skipAuthorization:e.skipAuthorization,method:e.method,data:q,url:g+n,timeout:t.promise};return d.connect(p)!==!1?a(p).then(function(i){d.success(i,p,k,j)!==!1&&k.resolve(i,p,k,j)},function(i){d.error(i,p,k,j)!==!1&&k.reject(i,p,k,j)}):d.error({message:"Tidak dapat terhubung"},p,k,j)!==!1&&k.reject({message:"Tidak dapat terhubung"},p,k,j),m.abort=function(){j=!0,t.resolve()},m},count:function(i,j){return this.connect("count",i,j)},list:function(i,j){return this.connect("list",i,j)},retrieve:function(j,k,l){if(j=j||"",k=k||{},"object"==typeof j){try{k=angular.copy(j)}catch(i){k=j}}else{k[f]=j}return this.connect("retrieve",k,l)},keyvalues:function(i,j){return this.connect("keyvalues",i,j)},insert:function(i,j){return this.connect("insert",i,j)},update:function(i,j){return this.connect("update",i,j)},remove:function(j,k,l){if(j=j||"",k=k||{},"object"==typeof j){try{k=angular.copy(j)}catch(i){k=j}}else{k[f]=j}return this.connect("delete",k,l)},isexist:function(i,j){return this.connect("is_exist",i,j)}}}}]),alt.module("alt-api",alt.modules.api),alt.modules.storage=angular.module("alt-storage",[]).factory("$storage",["$log","$q",function(a,b){return function(c,e){e=e||c+"id",store.set(alt.application+"_data",store.get(alt.application+"_data")||{});var d={table:c,pk:e,response:function(f,g){return g=g||0,{status:g,data:0==g?f:null,message:0!=g?f:""}},get:function(){var h=store.get(alt.application+"_data"),f=h[c]||[],g=b.defer();return g.resolve(d.response(f)),g.promise},save:function(h){var f=store.get(alt.application+"_data");f[c]=h,store.set(alt.application+"_data",f);var g=b.defer();return g.resolve(d.response(1)),g.promise},list:function(){return d.get()},search:function(h,f){var g=b.defer();return d.list(c).then(function(m){for(var n=m.data,j={id:-1,data:null},k=0;k<n.length;k++){if(n[k][h]==f){j.id=k,j.data=n[k][h];break}}-1==j.id?g.reject(d.response("Data tidak ditemukan",j.id)):g.resolve(d.response(j))}),g.promise},count:function(){var f=b.defer();return d.list(c).then(function(h){var i=h.data,g=i.length;f.resolve(d.response(g))}),f.promise},insert:function(f){var g=b.defer();return d.list(c).then(function(h){var i=h.data;f[e]=parseInt(i[i.length-1]?i[i.length-1][e]||0:0)+1,i.push(f),d.save(i).then(function(){g.resolve(d.response(res))})}),g.promise},retrieve:function(g){var f=b.defer();return d.search(e,g).then(function(h){var i=h.data,j=i.data;f.resolve(d.response(j))},function(h){f.reject(d.response(h))}),f.promise},update:function(g){var f=b.defer();return d.list().then(function(h){var i=h.data;d.search(e,g[e]).then(function(j){var k=j.data;i[k.id]=g,d.save(i).then(function(){f.resolve(d.response(1))})},function(j){f.reject(d.response("Tidak ada data yang diupdate",-1))})}),f.promise},remove:function(g){var f=b.defer();d.list().then(function(h){var i=h.data;d.search(e,newdata[e]).then(function(j){var k=j.data;i.splice(k.id,1),d.save(i).then(function(){f.resolve(d.response(1))})},function(j){f.reject(d.response("Tidak ada data yang dihapus",-1))})})},keyvalues:function(h,f){f=f||"";var g=b.defer();return d.list(c).then(function(j){for(var m=j.data,k={},i=0;i<m.length;i++){k[m[i][h]]=""!=f?m[i][f]:m[i]}g.resolve(k)}),g.promise},isexist:function(g,h){var f=b.defer();return d.list().then(function(k){for(var j=k.data,m=0,i=0;i<j.length;i++){m+=j[i][g]==h?1:0}f.resolve(m)}),f.promise}};return d}}]),alt.module("alt-storage",alt.modules.storage),alt.socketUrl="",alt.modules.socket=angular.module("alt-socket",[]).provider("socketFactory",[function(){var a="socket:";this.$get=["$rootScope","$timeout",function(c,d){var b=function(f,g){return g?function(){var e=arguments;d(function(){g.apply(f,e)},0)}:angular.noop};return function(m){m=m||{};var f=m.ioSocket||io.connect(),k=void 0===m.prefix?a:m.prefix,e=m.scope||c,h=function(i,l){f.on(i,l.__ng=b(f,l))},g=function(i,l){f.once(i,l.__ng=b(f,l))},j={on:h,addListener:h,once:g,emit:function(i,l,q){var p=arguments.length-1,q=arguments[p];return"function"==typeof q&&(q=b(f,q),arguments[p]=q),f.emit.apply(f,arguments)},removeListener:function(i,l){return l&&l.__ng&&(arguments[1]=l.__ng),f.removeListener.apply(f,arguments)},removeAllListeners:function(){return f.removeAllListeners.apply(f,arguments)},disconnect:function(i){return f.disconnect(i)},connect:function(){return f.connect()},forward:function(i,l){i instanceof Array==!1&&(i=[i]),l||(l=e),i.forEach(function(p){var q=k+p,o=b(f,function(){Array.prototype.unshift.call(arguments,q),l.$broadcast.apply(l,arguments)});l.$on("$destroy",function(){f.removeListener(p,o)}),f.on(p,o)})}};return j}}]}]).factory("$socket",["socketFactory",function(a){return a({ioSocket:io.connect(alt.socketUrl||alt.serverUrl)})}]),alt.module("alt-socket",alt.modules.socket),alt.modules["export"]=angular.module("alt-export",[]).factory("$export",["$log",function(a){return{excel:function(b,d){d=d||"download",b+="";var f="data:application/vnd.ms-excel;base64,",c="";c+='<html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel" xmlns="http://www.w3.org/TR/REC-html40"><head><!--[if gte mso 9]><xml><x:ExcelWorkbook><x:Name>'+d+"</x:Name><x:ExcelWorksheets><x:ExcelWorksheet><x:Name>"+d+"</x:Name><x:WorksheetOptions><x:DisplayGridlines/></x:WorksheetOptions></x:ExcelWorksheet></x:ExcelWorksheets></x:ExcelWorkbook></xml><![endif]--></head><body>",c+=b,c+="</body></html>",window.open(f+window.btoa(c),"_blank")},print:function(b,c){b=b||"",c=c||'<link type="text/css" rel="stylesheet" media="all" href="asset/lib/bootstrap2.3.2/bootstrap/css/bootstrap.min.css"/><link type="text/css" rel="stylesheet" media="all" href="asset/css/bootstrap-responsive.min.css"/><link type="text/css" rel="stylesheet" media="all" href="asset/css/style.css"/>';var d=window.open("","","left=0,top=0,width=800,height=900,toolbar=0,scrollbars=0,status=0");d.document.write(c),d.document.write(b),d.document.close(),d.focus(),d.print(),d.close()}}}]),alt.module("alt-export",alt.modules["export"]),alt.baseUrl="#!/",alt.routeFolder=alt.routeFolder||"route",alt.defaultRoute=alt.defaultRoute||"",alt.modules.route=angular.module("alt-route",["ngRoute"]).config(["$locationProvider","$compileProvider","$routeProvider",function(a,c,d){a.html5Mode(!1),a.hashPrefix("!");var b=/^\s*(https?|ftp|mailto|file|tel|app):|data:image|javascript:|\//;c.urlSanitizationWhitelist&&c.urlSanitizationWhitelist(b),alt.routing=function(){return{templateUrl:function(f){var g=alt.routeFolder+"/"+(f.altmodule?f.altmodule+"/":"")+(f.altcontroller?f.altcontroller+"/":"")+(f.altaction?f.altaction+"/":""),h=g+"view."+(""!=alt.theme?alt.theme+".":"")+"html"+(""!=alt.urlArgs?"?"+alt.urlArgs:"");return h},controller:["$scope","$log","$routeParams","$rootScope","$q",function(j,m,q,k,g){var p=k.onRouteChanged(q)||function(){var e=g.defer();return e.resolve(),e.promise},f=alt.routeFolder+"/"+(q.altmodule?q.altmodule+"/":"")+(q.altcontroller?q.altcontroller+"/":"")+(q.altaction?q.altaction+"/":""),h=angular.element(document.getElementsByTagName("body")[0]).injector();p.then(function(){requirejs([f+"controller"],function(t){var w=0,r=[];if("function"==typeof t){for(w=0;w<arguments.length;w++){r.push(arguments[w])}r.push(h),t.apply(this,r)}else{if("object"==typeof t&&t.length){var v,i="function"==typeof t[t.length-1]?t[t.length-1]:angular.noop,s="function"==typeof t[t.length-1]?t.length-1:t.length;for(w=0;s>w;w++){switch(v=null,t[w]){case"$scope":v=j;break;case"$injector":v=h;break;default:v=h.get(t[w])||null}r.push(v)}i.apply(this,r)}}j.$apply(),k.$emit("$routeChangeLoaded")})})}]}},d.when("/",""!=alt.defaultRoute?{redirectTo:alt.defaultRoute}:alt.routing()),d.when("/:altaction",alt.routing()),d.when("/:altcontroller/:altaction",alt.routing()),d.when("/:altmodule/:altcontroller/:altaction",alt.routing()),d.otherwise({resolve:{redirectCheck:["$location",function(e){-1===e.absUrl().indexOf(alt.baseUrl)&&e.path("/")}]}})}]),alt.module("alt-route",alt.modules.route),alt.modules.validation=angular.module("alt-validation",[]).factory("$valid",["$log",function(a){return{required:function(b){return 0!==b&&(b=(b||"")+""),""!==b&&"undefined"!=typeof b},regex:function(b,c){return b=(b||"")+"",c.test(b)},email:function(b){return this.regex(b,/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i)},username:function(b){return b+="",b.toLowerCase().replace(/[^a-z0-9._-]/,"")},number:function(b){return this.regex(b,/^[0-9]+\.?[0-9]*?$/i)},integer:function(b){return this.regex(b,/^[0-9]*$/i)},equals:function(b,c){return b===c},notequals:function(b,c){return b!==c},lessthan:function(b,c){return c>b},lessequalthan:function(b,c){return c>=b},greaterthan:function(b,c){return b>c},greaterequalthan:function(b,c){return c>=b},between:function(b,c,d){return b>=c&&d>=b},date:function(b){return b+="",8==b.length&&moment(b,"YYYYMMDD").isValid()},month:function(b){return b+="",6==b.length&&moment(b,"YYYYMM").isValid()},year:function(b){return b+="",4==b.length&&moment(b,"YYYY").isValid()},time:function(b){return b+="",4==b.length&&moment(b,"HHmm").isValid()}}}]).factory("$validate",["$valid","$log","$injector",function(c,f,g){var d=function(){return{rules:[],messages:[],rule:function(a,h){return this.rules.push(a),this.messages.push(h),this},validate:function(){for(var a=!0,h=[],i=0;i<this.rules.length;i++){this.rules[i]||(a=!1,h.push(this.messages[i]))}return{res:a,message:h}},check:function(){var a=this.validate(),i=g.get("$alert");if(!a.res&&i){for(var h=0;h<a.message.length;h++){i.add(a.message[h],i.danger)}}return a.res}}};for(var b in c){c.hasOwnProperty(b)&&(d[b]=c[b])}return d}]),alt.module("alt-validation",alt.modules.route),alt.modules.alert=angular.module("alt-alert",[]).factory("$alert",["$log","$timeout","$rootScope",function(a,b,c){return{items:[],warning:"warning",danger:"danger",info:"info",success:"success",ismultiple:!0,timer:4000,add:function(f,i,g){f=f||"",i=i||this.warning,g=g||0,this.ismultiple||(this.items=[]);var e=this,h=this.items.length,d={id:h,type:i,message:f,skip:g,isshow:0==g,hide:function(){this._hide(),e.items.splice(e.items.indexOf(this),1)},onload:function(){var j=this;b(function(){j.hide()},e.timer)}};this.items.push(d)}}}]).run(["$log","$timeout","$rootScope","$alert",function(a,c,d,b){d.$alert=b}]),alt.module("alt-alert",alt.modules.alert),alt.menu="",alt.menuFolder=alt.menuFolder||"menu",alt.modules.menu=angular.module("alt-menu",[]).run(["$rootScope",function(a){a.menu=store.get(alt.application+"_menu")||{submenu:""},a.$watch("menu",function(b,c){b!=c&&(store.set(alt.application+"_menu",b),a.menu=b)},!0),a.$on("$routeChangeStart",function(c,d,b){alt.menu=alt.menuFolder+"/"+("viewer"==d.params.altaction?$auth.userdata.usergroupname:"public")+".html",a.menuLocation=alt.menu,a.menu.submenu=""})}]),alt.module("alt-menu",alt.modules.menu),alt.language="id",alt.dictionary=alt.extend({id:{}},alt.dictionary),alt.modules.i18n=angular.module("alt-i18n",[]).factory("$i18n",["$log",function(a){return function(b){return alt.dictionary[alt.language]?alt.dictionary[alt.language][b]||b:b}}]),alt.module("alt-i18n",alt.modules.i18n),alt.modules.auth=angular.module("alt-auth",["angular-jwt"]).factory("$auth",["$log","$window","jwtHelper",function(a,b,c){return store.set(alt.application+"_token",store.get(alt.application+"_token")||""),store.set(alt.application+"_userdata",store.get(alt.application+"_userdata")||{}),{token:"",userdata:{},set_token:function(d){this.token=d,store.set(alt.application+"_token",this.token)},set_userdata:function(d){this.userdata=d,store.set(alt.application+"_userdata",this.userdata)},login:function(d){"string"==typeof d?(this.set_token(d),this.set_userdata(c.decodeToken(this.token))):this.set_userdata(d)},logout:function(){this.token="",this.userdata={},store.set(alt.application+"_token",""),store.set(alt.application+"_userdata",{}),store.set(alt.application+"_filter",""),store.set(alt.application+"_sorting","")},islogin:function(){return""!=this.token?!c.isTokenExpired(this.token):Object.keys(this.userdata).length>0},check:function(d){return 0==d?this.islogin():this.islogin()&&"undefined"!=typeof this.userdata.userlevel&&(parseInt(this.userdata.userlevel)&parseInt(d))>0},set_permission:function(d,e){return e="undefined"!=typeof e?e:!0,this.check(d)?!0:(e&&(b.location.href=alt.baseUrl+"error?code=403"),!1)}}}]).config(["$provide","$httpProvider",function(a,b){a.factory("authHttpInterceptor",["$auth","$log","$q","$window",function(c,f,g,d){return{request:function(h){return 0===h.url.indexOf(alt.serverUrl)&&h.data&&c.token&&(h.data.token=c.token),h}}}]),b.interceptors.reverse().push("authHttpInterceptor"),b.interceptors.reverse()}]).run(["$auth","$log",function(a,b){var c=store.get(alt.application+"_token");c&&a.login(store.get(alt.application+"_token"))}]),alt.module("alt-auth",alt.modules.auth);